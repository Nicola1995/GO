
<%= javascript_include_tag "registration.js"%>
<script> playerAdd() </script>
<%= form_for @team, {url: {action: "create"}, :html => {:id => 'registrationForm', :onLoad => 'regOnLoad()'} } do |f| %>
	<h2> Регистрация команды </h2>
	<div class="registrationRegPar">
		Как бы не утомляла Вас эта формочка, просим ее заполнить. Это нужно для организации чемпионата. 
		Много полей? Ну а кому сейчас легко.
	</div>
	<div class="fieldGroup">	
	<h3> Общая информация о команде </h3>	

	<div class="oneField">
    <a>Название команды</a>
    <%= f.text_field :name_team, placeholder:"Апельсин"  %>
	</div>

     <div class="e-regPar">
		Вы можете оставить некоторое сообщение для нас. Например о скидках для проживания.
	</div>
 <p>
   
    <%= f.text_area :message, class:"e-regTextInput" %>
  </p>
	</div>
<div class="fieldGroup">	
<h3> Менеджер </h3>
  
<%= f.fields_for @team.manager do |ct| %>
	<div class="oneField">
	<a>Фамилия</a>
      <%= ct.text_field :familyname, placeholder:"Иванов"%>
</div><div class="oneField">  
	<a>Имя</a>	    
      <%= ct.text_field :name , placeholder:"Иван" %>
	</div><div class="oneField">    	
    	<a>Отчество</a>
      <%= ct.text_field :secondname, placeholder:"Иванович"%>
</div><div class="oneField"> 
    	<a>Университет</a>
      <%= ct.text_field :univercity, placeholder:"Петрозаводский ГУ"%>
</div><div class="oneField">     
      <%= ct.label :Должность %><br>     
      <%= ct.select(:position, options_for_select([['ректор','ректор'], ['студент','студент'],['преподаватель','преподаватель']]),{}) %>
</div><div class="oneField"> 
    	<a>Телефон</a>
      <%= ct.text_field :kontakts, placeholder:"+79876543210"%>
</div><div class="oneField"> 
    	<a>Почта</a>
      <%= ct.email_field :email, placeholder:"ivan@yahoo.com" %>
</div>     
   <% end %>
</div><!-- class="fieldGroup" -->

	<div class="registrationRegPar">
<h3> Состав команды </h3>

		Заполните информацию о составе команды. Контактные данные могут быть использованы для связи с игроками.
		Контактные данные не будут видны всем посетителям сайта. Если в команде выступают более трех человек, воспользуйтесь кнопкой "добавить игрока".
	</div>

 
<%q=1%>
<%@team.teammates.each do |tm|%>

<div class="fieldGroup" id="<%="player"+q.to_s%>" > 

<h3> Игрок <%=q%> </h3>
<%q=q+1%> 
  <%= f.fields_for tm, index: tm.id do |ct| %>
	<div class="oneField"><a>Имя</a>   
      <%= ct.text_field :name, class:"e-regTextInput", placeholder:"Петр" %>
	</div>
   	<div class="oneField"><a>Фамилия</a>
      <%= ct.text_field :lastname, class:"e-regTextInput", placeholder:"Петров" %>
	</div>
   	<div class="oneField"><a>Отчество</a>
      <%= ct.text_field :secondname, class:"e-regTextInput", placeholder:"Петрович" %>
	</div>   
	<div class="oneField"><a>Уровень игры</a>
      <%= ct.text_field :level, class:"e-regTextInput", placeholder:"1 дан" %>
	</div>   
	<div class="oneField"><a>e-mail</a>
      <%= ct.email_field :email, class:"e-regTextInput", placeholder:"petr@yahoo.com" %>
   </div>
   <% end %>
</div>
<%end%>

<a onClick="playerAdd()" > Добавить игрока </a>
<br />
 <p>
    <%= f.submit :value=>'Добавить каманду', :class=>"e-regSubmit"%>
  </p>
<%end%>
